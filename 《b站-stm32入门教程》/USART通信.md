# 理论

## 通信接口简介

![](D:\notes\《b站-stm32入门教程》\pic\usart1.png)

- 引脚：通信协议/方式
- 双工：是否能双向同时通信，是否只能从一个设备到另一个设备
- 时钟：用一个时钟叫同步，确定一个频率叫异步
- 电平：单端需要两部分共地，双端依靠两部分的电压差
- 设备：多设备就是一根线上能挂载多个通信设备

## 串口通信

![](D:\notes\《b站-stm32入门教程》\pic\usart2.png)



![](D:\notes\《b站-stm32入门教程》\pic\usart3.png)



![](D:\notes\《b站-stm32入门教程》\pic\usart4.png)

- 空闲时高电平，出现一个低电平(下降沿)代表往后开始进行传输，最后一位是高电平且不再传数据代表结束
- 传输时低位先行
- 校验位可以选择连在数据最后和与数据分开

## USART外设

- USART/UART就是同步/异步的区别，一般不用同步

### 简介

![](D:\notes\《b站-stm32入门教程》\pic\usart5.png)

### USART电路图

![](D:\notes\《b站-stm32入门教程》\pic\usart6.png)

- TDR：发送数据寄存器

- 发送移位寄存器发送出去后标志位(TXE)置1，TDR再把数据送过来

  同理，接收移位寄存器和RDR传输也会有一个标志位(RXNE)，完成置1

- 流控工作模式：nrts和ncts搭配使用，告诉对方自己现在能不能接受新数据

- 波特率发生器：时钟进行分频，支持小数分频

## USART逻辑结构

![](D:\notes\《b站-stm32入门教程》\pic\usart7.png)

## 数据帧细节

![](D:\notes\《b站-stm32入门教程》\pic\usart8.png)

- 9位字长一般选择有校验，8位一般选择无校验

![](D:\notes\《b站-stm32入门教程》\pic\usart9.png)

- 停止位可以选择时长



## 波特率发生器计算公式

![](D:\notes\《b站-stm32入门教程》\pic\usart10.png)
